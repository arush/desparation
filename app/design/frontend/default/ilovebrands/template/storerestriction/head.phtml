<?php 
//Mage::getSingleton('customer/session')->setBeforeAuthUrl($this->getRequest()->getRequestUri());
Mage::getSingleton('customer/session')->setBeforeAuthUrl(Mage::getUrl("customer/account/index"));
if(!Mage::getSingleton('customer/session')->isLoggedIn()) {
    echo "<script type=\"text/javascript\">window.location='".Mage::getUrl("customer/account/login")."';</script>";  
}
?>